<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<title>Lofi Music</title>
		<!-- ThÃªm Tailwind CSS -->
		<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
	</head>
	<body class="bg-gray-800 text-white font-sans text-center p-5">
		<h1 class="text-3xl font-bold mb-6 flex items-center justify-center space-x-3 text-gray-100">
			<span>ğŸ§</span>
			<span>TrÃ¬nh Nghe Nháº¡c</span>
		</h1>

		<div class="mb-5">
			<button onclick="playNext()" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition">Tiáº¿p theo</button>
			<button onclick="toggleRandom()" class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition">Cháº¿ Ä‘á»™: <span id="mode">Ngáº«u nhiÃªn</span></button>
		</div>

		<!-- Player: Container chá»© khÃ´ng dÃ¹ng video cá»‘ Ä‘á»‹nh -->
		<div id="playerContainer" class="w-full max-w-lg mx-auto rounded-lg bg-black overflow-hidden"></div>

		<div id="currentSong" class="mt-4 flex items-center justify-center space-x-3 text-lg bg-gray-700 p-3 rounded-xl shadow-lg max-w-md mx-auto"></div>

		<!-- Danh sÃ¡ch bÃ i hÃ¡t -->
		<ul id="playlist" class="mt-6 max-w-lg mx-auto bg-gray-700 rounded-lg shadow divide-y divide-gray-600 text-left"></ul>

		<script>
			const musicList = [
				"music/1.mp4",
				"music/2.mp4",
				"music/3.mp4",
				"music/4.mp4",
				"music/5.mp4",
				"music/6.mp4",
				"music/7.mp4",
				"music/8.mp3",
				"music/9.mp4",
				"music/10.mp3",
				"music/11.mp3",
				"music/12.mp3",
				"music/13.mp3",
				"music/14.mp3",
				"music/15.mp3",
				"music/16.mp3",
				"music/17.mp3",
				"music/18.mp3",
				"music/19.mp3",
				"music/20.mp3",
				"music/21.mp3",
				"music/22.mp3",
				"music/24.mp3",
				"music/25.mp3",
				"music/26.mp3",
				"music/27.mp3",
				"music/28.mp3",
				"music/29.mp3",
				// ThÃªm link YouTube vÃ­ dá»¥:
				"https://www.youtube.com/embed/lqFGzPM8wkg",
				"https://www.youtube.com/embed/xi1cWsfJTTs",
			];

			const songNames = [
				"ThÃ¡p RÆ¡i Tá»± Do",
				"GhÃ©p HÃ¬nh TÃ¬nh YÃªu",
				"GÃ³p Vui",
				"Kiss Kiss Shy Shy",
				"NhÆ°",
				"Báº¥t CÃ´ng",
				"CocoCoCo",
				"Magnetic",
				"SÆ¡n Háº£i",
				"Nháº­p HoÃ i",
				"KhÃ´ng Ná»¡ - Äáº¥u La Äáº¡i Lá»¥c",
				"CÃ³ - KhÃ´ng CÃ³",
				"Äá»‘i Diá»‡n",
				"Tham Cáº§u - Tháº§n áº¨n",
				"Ring Ring Ring",
				"TA - BÃ n Há»•",
				"NhÆ° Ca - Liá»‡t Há»a NhÆ° Ca",
				"CÃ¡i ÄuÃ´i Nhá»",
				"LÆ°u Chuyá»ƒn Doanh Há»“i",
				"ÄÃ´ng MiÃªn",
				"Polaroid Love",
				"For ya â€“ TÆ°á»Ÿng Tiá»ƒu Ni",
				"Say YES",
				"Chá» Äáº¿n ThÃ¡ng 13",
				"MÃ¬nh CÃ¹ng Nhau ÄÃ³ng BÄƒng",
				"Trang Giáº¥y Cuá»‘i CÃ¹ng",
				"Blueming - IU",
				"YÃªu NhÆ° Tháº¿ - Tháº§n áº¨n",
				// TÃªn bÃ i cho YouTube link
				"Há»c bÃ i vÃ  nghe nháº¡c cÃ¹ng tá»› nhÃ©",
				"Dá»¯ PhÆ°á»£ng HÃ nh OST",
			];

			let currentIndex = 0;
			let isRandom = true;

			const playerContainer = document.getElementById("playerContainer");
			const modeSpan = document.getElementById("mode");
			const currentSongDisplay = document.getElementById("currentSong");
			const playlist = document.getElementById("playlist");

			function renderPlaylist() {
				playlist.innerHTML = "";
				songNames.forEach((name, idx) => {
					const li = document.createElement("li");
					const isYouTube = musicList[idx].includes("youtube.com") || musicList[idx].includes("youtu.be");
					const url = musicList[idx];
					let icon = "ğŸµ"; // Máº·c Ä‘á»‹nh

					if (url.includes("youtube.com") || url.includes("youtu.be")) {
						icon = "â–¶ï¸"; // YouTube
					} else if (url.endsWith(".mp3")) {
						icon = "ğŸ¶"; // Audio mp3
					} else if (url.endsWith(".mp4")) {
						icon = "ğŸ¬"; // Video mp4
					}

					li.textContent = `${icon} ${name}`;
					li.className = "cursor-pointer px-4 py-2 hover:bg-gray-600 transition" + (idx === currentIndex ? " bg-gray-500 font-bold" : "");
					li.onclick = () => {
						currentIndex = idx;
						play(currentIndex);
						renderPlaylist();
					};
					playlist.appendChild(li);
				});
			}

			function play(index) {
				const url = musicList[index];
				playerContainer.innerHTML = ""; // XÃ³a ná»™i dung player cÅ©

				if (url.includes("youtube.com") || url.includes("youtu.be")) {
					// Link YouTube
					const iframe = document.createElement("iframe");
					iframe.src = url + "?autoplay=1"; // Auto-play YouTube
					iframe.width = "100%";
					iframe.height = "315";
					iframe.frameBorder = "0";
					iframe.allow = "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture";
					iframe.allowFullscreen = true;
					playerContainer.appendChild(iframe);
				} else {
					// File mp3/mp4
					const video = document.createElement("video");
					video.src = url;
					video.controls = true;
					video.playsInline = true;
					video.autoplay = true;
					video.className = "w-full";
					video.volume = 0.5;
					video.addEventListener("ended", playNext);
					playerContainer.appendChild(video);
				}

				// XÃ¡c Ä‘á»‹nh icon theo loáº¡i file
				let icon = "ğŸµ";
				if (url.includes("youtube.com") || url.includes("youtu.be")) {
					icon = "â–¶ï¸";
				} else if (url.endsWith(".mp3")) {
					icon = "ğŸ¶";
				} else if (url.endsWith(".mp4")) {
					icon = "ğŸ¬";
				}

				// Cáº­p nháº­t ná»™i dung "Äang phÃ¡t"
				currentSongDisplay.innerHTML = `<span class="text-2xl">${icon}</span> <span>${songNames[index]}</span>`;

				renderPlaylist();
			}

			function playNext() {
				if (isRandom) {
					let nextIndex;
					const nonYoutubeIndexes = musicList.map((item, idx) => (!item.includes("youtube.com") && !item.includes("youtu.be") ? idx : -1)).filter((idx) => idx !== -1);

					do {
						const randomPos = Math.floor(Math.random() * nonYoutubeIndexes.length);
						nextIndex = nonYoutubeIndexes[randomPos];
					} while (nonYoutubeIndexes.length > 1 && nextIndex === currentIndex);

					currentIndex = nextIndex;
				} else {
					currentIndex = (currentIndex + 1) % musicList.length;
				}
				play(currentIndex);
			}

			function toggleRandom() {
				isRandom = !isRandom;
				modeSpan.textContent = isRandom ? "Ngáº«u nhiÃªn" : "Tuáº§n tá»±";
			}

			// Khá»Ÿi Ä‘á»™ng trang
			modeSpan.textContent = isRandom ? "Ngáº«u nhiÃªn" : "Tuáº§n tá»±";
			renderPlaylist();
		</script>
	</body>
</html>
