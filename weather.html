<!DOCTYPE html>
<html lang="vi">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Thời Tiết</title>
		<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
		<style>
			body {
				font-family: "Inter", sans-serif;
			}
			.tab-button {
				padding: 0.5rem 1rem;
				border-radius: 0.5rem;
				color: #9ca3af;
				transition: color 0.3s ease;
				display: flex;
				align-items: center;
				justify-content: center;
				cursor: pointer;
				background-color: rgba(128, 128, 128, 0.5);
			}
			.tab-button:hover {
				color: #3b82f6;
			}
			.tab-button.active {
				color: #ffffff;
			}
			.tab-button.active .material-icons {
				color: #3b82f6;
			}
		</style>
		<script src="asset/tab-navigation.js"></script>
		<script>
			const apiKey = "979e7e4e95bc0ce656178e6a32d61218";
			const cities = [
				{ name: "Nha Be", lat: 10.6667, lon: 106.6833 },
				{ name: "Long Khanh", lat: 11.0167, lon: 107.15 },
			];

			async function getWeatherData(city) {
				try {
					const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${city.lat}&lon=${city.lon}&appid=${apiKey}&units=metric&lang=vi`);
					const data = await response.json();
					return data;
				} catch (error) {
					console.error("Lỗi khi lấy dữ liệu thời tiết:", error);
					return null;
				}
			}

			function updateWeatherDisplay(city, weatherData) {
				const container = document.getElementById(`weather-${city.name.toLowerCase().replace(/[^a-z0-9]/g, "-")}`);
				if (!container) return;

				if (weatherData) {
					container.innerHTML = `
						<div class="bg-gray-900/50 backdrop-blur-lg border border-gray-800/50 rounded-xl p-6 transition-all duration-300 hover:shadow-xl hover:shadow-gray-900/30 hover:-translate-y-2">
							<h3 class="text-xl font-bold mb-4 text-white">${city.name}</h3>
							<div class="flex items-center gap-6 mb-6">
								<img src="http://openweathermap.org/img/wn/${weatherData.weather[0].icon}@2x.png" alt="${weatherData.weather[0].description}" class="w-12 h-12">
								<div>
									<p class="text-4xl font-bold text-white">${Math.round(weatherData.main.temp)}°C</p>
									<p class="text-gray-400">${weatherData.weather[0].description}</p>
								</div>
							</div>
							<div class="grid grid-cols-2 gap-4 text-gray-400">
								<div class="p-3 rounded-lg bg-gray-900/20 backdrop-blur-sm">
									<p class="text-sm font-medium mb-1">Tốc độ gió</p>
									<p class="text-lg font-semibold">${weatherData.wind.speed} m/s</p>
								</div>
								<div class="p-3 rounded-lg bg-gray-900/20 backdrop-blur-sm">
									<p class="text-sm font-medium mb-1">Độ ẩm</p>
									<p class="text-lg font-semibold">${weatherData.main.humidity}%</p>
								</div>
								<div class="p-3 rounded-lg bg-gray-900/20 backdrop-blur-sm">
									<p class="text-sm font-medium mb-1">Áp suất</p>
									<p class="text-lg font-semibold">${weatherData.main.pressure} hPa</p>
								</div>
								<div class="p-3 rounded-lg bg-gray-900/20 backdrop-blur-sm">
									<p class="text-sm font-medium mb-1">Độ mây</p>
									<p class="text-lg font-semibold">${weatherData.clouds.all}%</p>
								</div>
							</div>
						</div>`;
				} else {
					container.innerHTML = '<p class="text-red-400 text-center p-4 rounded-lg bg-red-900/20">Không thể lấy dữ liệu thời tiết</p>';
				}
			}

			async function updateWeather() {
				for (const city of cities) {
					const weatherData = await getWeatherData(city);
					updateWeatherDisplay(city, weatherData);
				}
			}

			document.addEventListener("DOMContentLoaded", updateWeather);
			setInterval(updateWeather, 30 * 60 * 1000);
		</script>
	</head>
	<body class="min-h-screen bg-gradient-to-br from-gray-900 to-gray-800">
		<div class="bg-gray-900/50 backdrop-blur-lg border border-gray-800/50 rounded-3xl shadow-2xl w-full sm:max-w-2xl mx-auto p-4 text-center relative overflow-hidden h-[400px] sm:h-[80vh]">
			<!-- Tab Navigation -->
			<div id="tabNavigation" class="mb-6"></div>
			<script>
				document.getElementById("tabNavigation").innerHTML = createTabNavigation("weather");
			</script>

			<!-- Tab Content -->
			<div class="tab-content h-full">
				<div class="space-y-4">
					<div class="flex items-center justify-center gap-4">
						<div class="text-2xl text-blue-400">
							<span class="material-icons">wb_sunny</span>
						</div>
						<h2 class="text-sm font-extrabold bg-gradient-to-r from-blue-400 via-sky-400 to-purple-400 bg-clip-text text-transparent tracking-wider drop-shadow-lg uppercase animate-pulse">Thời Tiết</h2>
						<div class="text-2xl text-blue-400">
							<span class="material-icons">wb_sunny</span>
						</div>
					</div>

					<div class="space-y-4">
						<div class="flex flex-col items-center w-full">
							<!-- Weather Containers -->
							<div class="grid grid-cols-1 sm:grid-cols-2 gap-6 w-full">
								<div id="weather-nha-be" class="w-full"></div>
								<div id="weather-long-khanh" class="w-full"></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
